<!DOCTYPE html>
<html>
  <head>
    <title>Chat Bot</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

       function Chatbox({chatMessage,setChatMessage}){
       const [inputText, setinputText] = React.useState('');
       
         function saveInputText(event){
           setinputText(event.target.value); 
         }
         function sendMessage(){
          const newChatMessage=[...chatMessage,
          {
            message:inputText,
            sender:'user',
            id:crypto.randomUUID()
          }
        ];
          setChatMessage(newChatMessage);

        const response=Chatbot.getResponse(inputText);
         setChatMessage([...newChatMessage,
          {
            message:response,
            sender:'robot',
            id:crypto.randomUUID()
          }
        ]);


        setinputText('');
         }

        return(
        <>
          <input 
          placeholder="You can freely ask any question" 
          size="30" 
          onChange={saveInputText}
          value={inputText}
          />
          <button onClick={sendMessage}>Send</button>
        </>
        )
      }

      function Messaging({message , sender}){
        
        return(
          <div>
          {(
            sender=="user" &&
            <img src="user.png" width="50px"/>
          )}
          {message}
          {(
             sender=="robot" && 
            <img src="robot.png" width="50px"/>)
          }
          </div>
        )
      }

      function ChatMessages({chatMessage}){
        

      return(
        <>
          {chatMessage.map((chatMessage)=>{
          return(
            <Messaging
            message={chatMessage.message}
            sender={chatMessage.sender}
            key={chatMessage.id}
            />
           );
           })}
           </>
        
          );
      }
    
      
      function App(){
        const [chatMessage,setChatMessage]=React.useState(
         [{
          message: 'Hello How are You',
          sender:'user',
          id:'id1'
        },
        {
          message:'I am fine ,How about you',
          sender:'robot',
          id:'id2'
        }
      ]);
      
      //const [chatMessage,setChatMessage]=array;
      // const chatMessage=array[0];
      // const setChatMessage=array[1];
      //we applied destructuring
      
        return(
          <div>
          <Chatbox
          chatMessage={chatMessage}
          setChatMessage={setChatMessage}
          />
          <ChatMessages
          chatMessage={chatMessage}
          />
        </div>
        )
      };

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App/>);
    </script>
  </body>
</html>